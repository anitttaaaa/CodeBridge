<!DOCTYPE HTML>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{base}">
<head>
    <title>Find your job!</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</head>

<body>

<div layout:fragment="candidateContent" class="candidate-page-container ">

    <!----BASIC INFO-------------------------------------------------------------------------------------------------------->

    <div class="candidate-card">
        <div class="card-body ">
            <button type="button" class="add-job-offer-button btn btn-primary mb-3" data-toggle="modal"
                    data-target="#editProfileModal">
                <i class="fas fa-pencil-alt"></i> Edit Details
            </button>
            <!-- Modal do edycji profilu -->
            <div class="modal fade " id="editProfileModal" tabindex="-1" role="dialog"
                 aria-labelledby="editProfileModalLabel" aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="editProfileModalLabel">Edit Profile</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <form th:action="@{/candidate-portal/update-candidate-basic-info}" method="post"
                                  enctype="multipart/form-data">
                                <div class="input-group mb-3">
                                    <label class="input-group-text" for="editName">Name</label>
                                    <input type="text" id="editName" name="name" class="form-control" required
                                           th:value="${candidate.name}">
                                </div>

                                <div class="input-group mb-3">
                                    <label class="input-group-text" for="editSurname">Surname</label>
                                    <input type="text" id="editSurname" name="surname" class="form-control"
                                           required
                                           th:value="${candidate.surname}">
                                </div>

                                <div class="input-group mb-3">
                                    <label class="input-group-text" for="editPhone">Phone</label>
                                    <input type="text" id="editPhone" name="phone" class="form-control" required
                                           th:value="${candidate.phone}">
                                </div>

                                <div class="input-group mb-3">
                                    <label class="input-group-text" for="editLinkedIn">LinkedIn</label>
                                    <input type="text" id="editLinkedIn" name="linkedIn" class="form-control"
                                           th:value="${candidate.linkedIn}">
                                </div>

                                <div class="input-group mb-3">
                                    <label class="input-group-text" for="editGitHub">GitHub</label>
                                    <input type="text" id="editGitHub" name="gitHub" class="form-control"
                                           th:value="${candidate.gitHub}">
                                </div>

                                <div>
                                    <input class="add-job-offer-button btn btn-primary" type="submit"
                                           value="Save changes">
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div> <!-- Koniec modalu -->


            <h3 style="margin-bottom: 40px;">Basic Info</h3>
            <div class="card-body d-flex align-items-center flex-column flex-md-row">

                <!---PROFILE PHOTO------------------------------------------------------------------------------------------------------------>
                <div id="photo-container" class="me-4 mb-3 mb-md-0">
                    <img th:if="${candidate.profilePhoto != null}"
                         th:src="@{candidate-portal/profilePhoto/{email}(email=${candidate.email})}"
                         alt="Profile Photo"
                         class="img-fluid rounded-circle"
                         style="width: 150px; height: 150px;">
                    <img th:if="${candidate.profilePhoto == null}"
                         th:src="@{/images/avatar.PNG}"
                         alt="Default Avatar"
                         class="img-fluid rounded-circle"
                         style="width: 150px; height: 150px;"/>
                    <div class="edit-photo-button position-absolute" style="bottom: 10px; right: 10px;">
                        <i class="fas fa-camera" style="cursor: pointer;" data-toggle="modal"
                           data-target="#photoModal"></i>
                    </div>
                </div>

                <div class="candidate-details frame-card-basic-info">
                    <div class="mb-3">
                        <h5 class="card-title" style="font-size: 1.5em;"
                            th:text="${candidate.name + ' ' + candidate.surname}"></h5>
                        <p class="card-text">
                            <i class="bi bi-envelope-fill icon-color"></i>
                            <span th:text="${candidate.email}"></span>
                        </p>
                        <p class="card-text">
                            <i class="bi bi-telephone-fill icon-color"></i>
                            <span th:text="'tel. ' + ${candidate.phone}"></span>
                        </p>
                        <p class="card-text">
                            <i class="bi bi-linkedin icon-color"></i>
                            <a class="custom-link" th:href="${candidate.linkedIn}" target="_blank"
                               th:text="${candidate.linkedIn != null ? candidate.linkedIn : 'Profile LinkedIn'}"
                               th:if="${candidate.linkedIn != null}"></a>
                        </p>
                        <p class="card-text">
                            <i class="bi bi-github icon-color"></i>
                            <a class="custom-link" th:href="${candidate.gitHub}" target="_blank"
                               th:text="${candidate.gitHub != null ? candidate.gitHub : 'Profile GitHub'}"
                               th:if="${candidate.gitHub != null}"></a>
                        </p>
                        <i class="bi me-2"
                           th:classappend="${candidate.status == ' LOOKING_FOR_A_JOB' ? 'bi-person-fill text-success' : (candidate.status == 'CURRENTLY_HIRED' ? 'bi-person-fill text-danger' : 'bi-question-circle')}"></i>

                        <!-- Sprawdzenie, czy status kandydata jest pusty -->
                        <span th:if="${candidate.status == null}">Status: No information</span>
                        <span th:if="${candidate.status != null}" th:text="${candidate.status}"></span>
                        <button type="button" class="edit-status add-job-offer-button btn btn-primary mt-3 mt-md-0 ms-md-3" data-toggle="modal"
                                data-target="#editStatusModal">
                            <i class="fas fa-pencil-alt"></i> Edit Status
                        </button>
                    </div>
                </div>
            </div>
            <!-------status modal------------------------------------------------------------------------>
            <div class="modal fade" id="editStatusModal" tabindex="-1" role="dialog"
                 aria-labelledby="editStatusModalLabel" aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="editStatusModalLabel">Edit Status</h5>
                            <button type="button" class="close" data-dismiss="modal"
                                    aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <!-- Form for editing status -->
                            <form th:action="@{/candidate-portal/update-candidate-status}"
                                  method="post">
                                <div class="input-group mb-3">
                                    <label class="input-group-text" for="status">Status</label>
                                    <select class="form-control" id="status" name="status">
                                        <option value="" disabled selected>Choose...</option>
                                        <option th:each="status : ${T(pl.zajavka.CodeBridge.api.enums.StatusEnum).values()}"
                                                th:value="${status}"
                                                th:text="${status}">
                                        </option>
                                    </select>
                                </div>
                                <div>
                                    <button type="submit" class="add-job-offer-button btn btn-primary">Save changes
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Główne Okno Modal do edycji zdjęcia profilowego -->
            <div class="modal fade" id="photoModal" tabindex="-1" role="dialog" aria-labelledby="photoModalLabel"
                 aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="photoModalLabel">Edit Profile Photo</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body text-center">
                            <!-- Profile Photo -->
                            <img th:if="${candidate.profilePhoto != null}"
                                 th:src="@{candidate-portal/profilePhoto/{email}(email=${candidate.email})}"
                                 alt="Profile Photo"
                                 class="img-fluid rounded-circle"
                                 style="width: 150px; height: 150px;">
                            <img th:if="${candidate.profilePhoto == null}"
                                 th:src="@{/images/avatar.png}"
                                 alt="Default Avatar"
                                 class="img-fluid rounded-circle"
                                 style="width: 150px; height: 150px;"/>
                            <!-- Centered buttons below the photo -->
                            <div class="d-flex flex-column align-items-center mt-3">
                                <!-- Change Photo Button -->
                                <button type="button" class="change-photo-button btn btn-danger mb-2"
                                        data-toggle="modal"
                                        data-target="#changePhotoModal" data-dismiss="modal">
                                    <i class="fas fa-pencil-alt"></i> Change Photo
                                </button>
                                <!-- Delete Photo Form -->
                                <form th:action="@{/candidate-portal/delete-candidate-photo/{email}}"
                                      th:method="DELETE">
                                    <button type="submit" class="change-photo-button btn btn-danger">
                                        <i class="fas fa-trash icon-size"></i> Delete Photo
                                    </button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Drugie Okno Modal do przesyłania nowego zdjęcia -->
        <div class="modal fade" id="changePhotoModal" tabindex="-1" role="dialog"
             aria-labelledby="changePhotoModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="changePhotoModalLabel">Choose new Photo</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <!-- Formularz do przesyłania nowego zdjęcia -->
                        <form th:action="@{/candidate-portal/update-candidate-photo}" method="post"
                              enctype="multipart/form-data">
                            <div class="form-group">
                                <label for="profilePhoto">Choose Photo:</label>
                                <input type="file" id="profilePhoto" name="profilePhoto" class="form-control"
                                       required>
                            </div>
                            <button type="submit" class="change-photo-button btn btn-danger mb-2">Save changes
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <!-- Jeśli kandydat jest nullem, wyświetl komunikat -->
        <div th:if="${candidate == null}">
            <p>No candidate details available. Please provide a valid email.</p>
        </div>
    </div>
    <!---BIO------------------------------------------------------------------------------------------------------------------------------------------------->
    <div class="candidate-card">
        <div class="card-body">
            <!-- Przycisk do edycji profilu -->
            <button type="button" class="add-job-offer-button btn btn-primary mb-3" data-toggle="modal"
                    data-target="#editAboutMe">
                <i class="fas fa-pencil-alt"></i> Edit Bio
            </button>
            <h4 class="mb-0">About me</h4>
            <p class="card-text text-justify frame-card" th:text="${candidate.aboutMe}">No information available</p>
        </div>
    </div>
    <!-- Nowe Okno Modal do edycji profilu -->
    <div class="modal fade" id="editAboutMe" tabindex="-1" role="dialog"
         aria-labelledby="editAboutMeLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editAboutMeLabel">Edit Bio</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <!-- Form for updating personal details -->
                    <form th:action="@{/candidate-portal/update-candidate-about-me}" method="post">
                        <div class="form-group">
                            <label for="aboutMe">About Me:</label>
                            <textarea class="form-control" id="aboutMe" name="aboutMe" rows="4"
                                      th:text="${candidate.aboutMe}"></textarea>
                        </div>
                        <button type="submit" class="add-job-offer-button btn btn-primary mb-3">Save changes
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <!----TECH SPECIALIZATION------------------------------------------------------------------------------------------------------------------>
    <div class="candidate-card">
        <div class="card-body">
            <!-- Przycisk do edycji specjalizacji technicznej -->
            <button type="button" class="add-job-offer-button btn btn-primary mb-3" data-toggle="modal"
                    data-target="#editTechSpecializationModal">
                <i class="fas fa-pencil-alt"></i> Edit Tech Specialization
            </button>
            <h4 class="mb-0">My Tech Specialization</h4>
            <p></p>
            <p class="card-text frame-card">
                <!-- Check if the tech specialization is empty -->
                <span th:if="${candidate.techSpecialization == null}">No Specialization</span>
                <span th:if="${candidate.techSpecialization != null}"
                      th:text="${candidate.techSpecialization}"></span>
            </p>
        </div>
    </div>
    <!-- Nowe Okno Modal do edycji specjalizacji technicznej -->
    <div class="modal fade" id="editTechSpecializationModal" tabindex="-1" role="dialog"
         aria-labelledby="editTechSpecializationModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editTechSpecializationModalLabel">Edit Tech Specialization</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <!-- Form for updating tech specialization -->
                    <form th:action="@{/candidate-portal/update-candidate-tech-specialization}" method="post">
                        <div class="form-group">
                            <label for="techSpecialization">Select Tech Specialization:</label>
                            <select class="form-control" id="techSpecialization" name="techSpecialization">
                                <option value="" disabled selected>Choose...</option>
                                <option th:each="techSpecialization : ${T(pl.zajavka.CodeBridge.api.enums.TechSpecializationsEnum).values()}"
                                        th:value="${techSpecialization}" th:text="${techSpecialization}">
                                </option>
                            </select>
                        </div>
                        <button type="submit" class="add-job-offer-button btn btn-primary">Save changes</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <!--SKILLS------------------------------------------------------------------------------------------->
    <div class="candidate-card">
        <div class="card-body">
            <button type="button" class="add-job-offer-button btn btn-primary mb-3" data-toggle="modal"
                    data-target="#editSkillsModal">
                <i class="fas fa-pencil-alt"></i> Edit Skills
            </button>
            <h4 class="mb-0 ">My Skills</h4>
            <p></p>
            <ul class="frame-card-skills ">
                <!-- Check if there are any skills -->
                <li th:if="${#lists.isEmpty(candidate.candidateSkills)}">No Skills</li>
                <li th:each="skill : ${candidate.candidateSkills}" th:text="${skill}"></li>
            </ul>
        </div>
    </div>
    <!-- Modal do edycji umiejętności -->
    <div class="modal fade" id="editSkillsModal" tabindex="-1" role="dialog" aria-labelledby="editSkillsModalLabel"
         aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editSkillsModalLabel">Edit Skills</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <!-- Formularz do aktualizacji umiejętności -->
                    <form th:action="@{/candidate-portal/update-candidate-skills}" method="post" id="skillsForm">
                        <div class="form-group ">
                            <label>Choose Skills:</label>

                            <select name="selectedSkill" class="form-control mb-3">
                                <option value="">Choose Skills</option>
                                <option th:each="skill : ${T(pl.zajavka.CodeBridge.api.enums.SkillsEnum).values()}"
                                        th:value="${skill}"
                                        th:text="${skill}"></option>
                            </select>
                            <div class="input-group mb-3"
                                 th:each="skill : ${T(pl.zajavka.CodeBridge.api.enums.SkillsEnum).values()}">
                                <div class="input-group-text">
                                    <input class="form-check-input mt-0" type="checkbox"
                                           th:field="*{candidate.candidateSkills}"
                                           th:value="${skill}"
                                           id="candidate_skill_${skill}"
                                           th:checked="${#lists.contains(candidate.candidateSkills, skill)}"/>
                                </div>
                                <label class="form-control" aria-label="Text input with checkbox"
                                       th:for="'candidate_skill_' + ${skill}"
                                       th:text="${skill}"></label>
                            </div>
                        </div>
                        <button type="submit" class="add-job-offer-button btn btn-primary">Save Changes</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <!----EXPERIENCE---------------------------------------------------------------------------------------------------------------------------------------------------------------------->
    <div class="candidate-card">
        <div class="card-body">
            <button type="button" class="add-job-offer-button btn btn-primary mb-3" data-toggle="modal"
                    data-target="#addExperienceModal">
                <i class="fas fa-plus"></i> Add Work Experience
            </button>
            <h4 class="mb-0">My Work Experience</h4>
            <p></p>
            <div class="experience-list">
                <!-- Pętla po doświadczeniu zawodowym kandydata -->
                <div th:each="experience : ${candidateExperiences}" class="frame-card card mb-3">
                    <div class="card-body">
                        <!-- Główna sekcja: stanowisko, firma, daty i przyciski -->
                        <div class="d-flex justify-content-between align-items-center">
                            <!-- Lewa sekcja: Pozycja i firma -->
                            <div>
                                <!-- Informacyjne teksty w ramkach -->
                                <div class="experience-info">Position: <span class="experience-info-value"
                                                                             th:text="${experience.candidatePosition}"></span>
                                </div>
                                <div class="experience-info">Company: <span class="experience-info-value"
                                                                            th:text="${experience.companyName}"></span>
                                </div>
                            </div>
                            <!-- Sekcja z datami -->
                            <div class="experience-dates text-right">
                                <p class="mb-1"><strong>From:</strong> <span
                                        th:text="${experience.fromDate}"></span></p>
                                <p class="mb-1"><strong>To:</strong> <span th:text="${experience.toDate}"></span>
                                </p>
                            </div>
                            <div class="experience-actions ml-3">
                                <!-- Edycja doświadczenia -->
                                <button type="button" class="btn btn-primary change-photo-button"
                                        th:data-target="'#editExperienceModal-' + ${experience.candidateExperienceId}"
                                        data-toggle="modal" title="Edit">
                                    <i class="fas fa-pencil-alt icon-size"></i>
                                </button>
                                <!-- Usuwanie doświadczenia -->
                                <form th:action="@{/candidate-portal/delete-experience}" method="post"
                                      class="d-inline">
                                    <input type="hidden" name="candidateExperienceId"
                                           th:value="${experience.candidateExperienceId}"/>
                                    <button type="submit" class="btn btn-danger change-photo-button" title="Delete">
                                        <i class="fas fa-trash icon-size"></i>
                                    </button>
                                </form>
                            </div>
                        </div>
                        <!-- Opis -->
                        <div class="mt-3">
                            <div class="experience-info">Description:</div>  <!-- Etykieta Description -->
                            <div class="experience-info-value description" th:text="${experience.description}"></div> <!-- Wartość description -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal edycji doświadczenia dla każdego obiektu -->
    <div th:each="experience : ${candidateExperiences}" class="modal fade"
         th:id="'editExperienceModal-' + ${experience.candidateExperienceId}" tabindex="-1" role="dialog"
         aria-labelledby="editExperienceModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Edit Work Experience</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <!-- Formularz edycji -->
                    <form th:action="@{/candidate-portal/update-candidate-experience}" method="post">
                        <input type="hidden" name="candidateExperienceId"
                               th:value="${experience.candidateExperienceId}"/>
                        <div class="form-group">
                            <label for="editCandidatePosition">Position</label>
                            <input type="text" class="form-control" id="editCandidatePosition" name="candidatePosition"
                                   th:value="${experience.candidatePosition}">
                        </div>
                        <div class="form-group">
                            <label for="editCompanyName">Company Name</label>
                            <input type="text" class="form-control" id="editCompanyName" name="companyName"
                                   th:value="${experience.companyName}">
                        </div>
                        <div class="form-group">
                            <label for="editDescription">Description</label>
                            <textarea class="form-control" id="editDescription" name="description"
                                      th:text="${experience.description}"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="editFromDate">From</label>
                            <input type="date" class="form-control" id="editFromDate" name="fromDate"
                                   th:value="${experience.fromDate}">
                        </div>
                        <div class="form-group">
                            <label for="editToDate">To</label>
                            <input type="date" class="form-control" id="editToDate" name="toDate"
                                   th:value="${experience.toDate}">
                        </div>
                        <button type="submit" class="add-job-offer-button btn btn-primary mb-3">Save changes</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal ADD -->
    <div class="modal fade" id="addExperienceModal" tabindex="-1" role="dialog"
         aria-labelledby="addExperienceModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addExperienceModalLabel">Add My Work Experience</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form action="#" th:action="@{/candidate-portal/add-candidate-experience}" method="post">
                        <!-- Company Name -->
                        <div class="form-group">
                            <label for="companyName">Company Name</label>
                            <input type="text" class="form-control" id="companyName" name="companyName"
                                   th:value="${candidateExperienceDTO != null ? candidateExperienceDTO.companyName : ''}">
                        </div>
                        <!-- Position -->
                        <div class="form-group">
                            <label for="candidatePosition">Position</label>
                            <input type="text" class="form-control" id="candidatePosition" name="candidatePosition"
                                   th:value="${candidateExperienceDTO != null ? candidateExperienceDTO.candidatePosition : ''}">
                        </div>
                        <!-- Description -->
                        <div class="form-group">
                            <label for="description">Description</label>
                            <textarea class="form-control" id="description" name="description"
                                      th:text="${candidateExperienceDTO != null ? candidateExperienceDTO.description : ''}"></textarea>
                        </div>
                        <!-- From Date -->
                        <div class="form-group">
                            <label for="fromDate">From</label>
                            <input type="date" class="form-control" id="fromDate" name="fromDate"
                                   th:value="${candidateExperienceDTO != null ? candidateExperienceDTO.fromDate : ''}">
                        </div>
                        <!-- To Date -->
                        <div class="form-group">
                            <label for="toDate">To</label>
                            <input type="date" class="form-control" id="toDate" name="toDate"
                                   th:value="${candidateExperienceDTO != null ? candidateExperienceDTO.toDate : ''}">
                        </div>

                        <!-- Submit Button -->
                        <button type="submit" class="add-job-offer-button btn btn-primary">Save changes</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <!-----PROJECT--------------------------------------------------------------------------------------------------------------------------------------->
    <div class="candidate-card">
        <div class="card-body">
            <button type="button" class="add-job-offer-button btn btn-primary mb-3" data-toggle="modal"
                    data-target="#addProjectModal">
                <i class="fas fa-plus"></i> Add Project
            </button>
            <h4 class="mb-0">My Projects</h4>
            <p></p>
            <div class="experience-list">
                <!-- Pętla po projektach kandydata -->
                <div th:each="project : ${candidateProjects}" class="frame-card card mb-3">
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <div class="experience-info">Title: <span class="experience-info-value"
                                                                          th:text="${project.projectTitle}"></span>
                                </div>
                                <div class="experience-info">Technologies: <span class="experience-info-value"
                                                                                 th:text="${project.technologies}"></span>
                                </div>
                            </div>
                            <div class="experience-dates text-right">
                                <p class="mb-1"><strong>From:</strong> <span th:text="${project.fromDate}"></span></p>
                                <p class="mb-1"><strong>To:</strong> <span th:text="${project.toDate}"></span></p>
                            </div>
                            <div class="experience-actions ml-3">
                                <!-- Edycja projektu -->
                                <button type="button" class="btn btn-primary change-photo-button"
                                        th:data-target="'#editProjectModal-' + ${project.candidateProjectId}"
                                        data-toggle="modal" title="Edit">
                                    <i class="fas fa-pencil-alt icon-size"></i>
                                </button>
                                <!-- Usuwanie projektu -->
                                <form th:action="@{/candidate-portal/delete-project}" method="post" class="d-inline">
                                    <input type="hidden" name="candidateProjectId"
                                           th:value="${project.candidateProjectId}"/>
                                    <button type="submit" class="btn btn-danger change-photo-button" title="Delete">
                                        <i class="fas fa-trash icon-size"></i>
                                    </button>
                                </form>
                            </div>
                        </div>
                        <!-- Opis -->
                        <div class="mt-3">
                            <div class="experience-info">Description:</div>
                            <div class="experience-info-value description" th:text="${project.description}"></div>
                        </div>

                        <!-- Link do projektu -->
                        <div class="mt-3">
                            <div class="experience-info">Project Link:</div>
                            <a th:href="${project.projectLink}" target="_blank" class="experience-info-value"
                               th:text="${project.projectLink}"></a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal ADD -->
    <div class="modal fade" id="addProjectModal" tabindex="-1" role="dialog" aria-labelledby="addProjectModalLabel"
         aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addProjectModalLabel">Add My Project</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form action="#" th:action="@{/candidate-portal/add-candidate-project}" method="post">
                        <div class="form-group">
                            <label for="projectTitle">Project Title</label>
                            <input type="text" class="form-control" id="projectTitle" name="projectTitle"
                                   th:value="${candidateProjectDTO != null ? candidateProjectDTO.projectTitle : ''}">
                        </div>
                        <div class="form-group">
                            <label for="technologies">Technologies</label>
                            <input type="text" class="form-control" id="projectTechnologies" name="technologies"
                                   th:value="${candidateProjectDTO != null ? candidateProjectDTO.technologies : ''}">
                        </div>
                        <div class="form-group">
                            <label for="description">Description</label>
                            <textarea class="form-control" id="projectDescription" name="description"
                                      th:text="${candidateProjectDTO != null ? candidateProjectDTO.description : ''}"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="fromDate">From</label>
                            <input type="date" class="form-control" id="fromDateProject" name="fromDate"
                                   th:value="${candidateProjectDTO != null ? candidateProjectDTO.fromDate : ''}">
                        </div>
                        <div class="form-group">
                            <label for="toDate">To</label>
                            <input type="date" class="form-control" id="toDateProject" name="toDate"
                                   th:value="${candidateProjectDTO != null ? candidateProjectDTO.toDate : ''}">
                        </div>
                        <div class="form-group">
                            <label for="projectLink">Project Link</label>
                            <input type="text" class="form-control" id="projectLink" name="projectLink"
                                   th:value="${candidateProjectDTO != null ? candidateProjectDTO.projectLink : ''}">
                        </div>
                        <button type="submit" class="add-job-offer-button btn btn-primary">Save changes</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal edycji projektu dla każdego obiektu -->
    <div th:each="project : ${candidateProjects}" class="modal fade"
         th:id="'editProjectModal-' + ${project.candidateProjectId}" tabindex="-1" role="dialog"
         aria-labelledby="editProjectModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Edit Project</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form th:action="@{/candidate-portal/update-candidate-project}" method="post">
                        <input type="hidden" name="candidateProjectId" th:value="${project.candidateProjectId}"/>
                        <div class="form-group">
                            <label for="editProjectTitle">Project Title</label>
                            <input type="text" class="form-control" id="editProjectTitle" name="projectTitle"
                                   th:value="${project.projectTitle}">
                        </div>
                        <div class="form-group">
                            <label for="editTechnologies">Technologies</label>
                            <input type="text" class="form-control" id="editProjectTechnologies" name="technologies"
                                   th:value="${project.technologies}">
                        </div>
                        <div class="form-group">
                            <label for="editDescription">Description</label>
                            <textarea class="form-control" id="editProjectDescription" name="description"
                                      th:text="${project.description}"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="editFromDate">From</label>
                            <input type="date" class="form-control" id="editFromDateProject" name="fromDate"
                                   th:value="${project.fromDate}">
                        </div>
                        <div class="form-group">
                            <label for="editToDate">To</label>
                            <input type="date" class="form-control" id="editToDateProject" name="toDate"
                                   th:value="${project.toDate}">
                        </div>
                        <div class="form-group">
                            <label for="editProjectLink">Project Link</label>
                            <input type="text" class="form-control" id="editProjectLink" name="projectLink"
                                   th:value="${project.projectLink}">
                        </div>
                        <button type="submit" class="add-job-offer-button btn btn-primary mb-3">Save changes</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <!---EDUCATION-------------------------------------------------------------------------------------------------------------------------------------------------------------------------->
    <div class="candidate-card">
        <div class="card-body">
            <button type="button" class="add-job-offer-button btn btn-primary mb-3" data-toggle="modal"
                    data-target="#addEducationModal">
                <i class="fas fa-plus"></i> Add Education
            </button>
            <h4 class="mb-0">My Education</h4>
            <p></p>
            <div class="experience-list">
                <div th:each="education : ${candidateEducationStages}" class="frame-card card mb-3">
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <div class="education-info">Institution: <span class="experience-info-value"
                                                                               th:text="${education.institution}"></span>
                                </div>
                                <div class="education-info">Degree: <span class="experience-info-value"
                                                                          th:text="${education.degree}"></span>
                                </div>
                                <div class="education-info">Field of Study: <span class="experience-info-value"
                                                                                  th:text="${education.fieldOfStudy}"></span>
                                </div>
                            </div>
                            <div class="experience-dates text-right">
                                <p class="mb-1"><strong>From:</strong> <span th:text="${education.fromDate}"></span></p>
                                <p class="mb-1"><strong>To:</strong> <span th:text="${education.toDate}"></span></p>
                            </div>
                            <div class="experience-actions ml-3">
                                <!-- Edycja edukacji -->
                                <button type="button" class="btn btn-primary change-photo-button"
                                        th:data-target="'#editEducationModal-' + ${education.candidateEducationId}"
                                        data-toggle="modal" title="Edit">
                                    <i class="fas fa-pencil-alt icon-size"></i>
                                </button>

                                <!-- Usuwanie edukacji -->
                                <form th:action="@{/candidate-portal/delete-education}" method="post" class="d-inline">
                                    <input type="hidden" name="candidateEducationId"
                                           th:value="${education.candidateEducationId}"/>
                                    <button type="submit" class="btn btn-danger change-photo-button" title="Delete">
                                        <i class="fas fa-trash icon-size"></i>
                                    </button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal ADD Education -->
    <div class="modal fade" id="addEducationModal" tabindex="-1" role="dialog" aria-labelledby="addEducationModalLabel"
         aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addEducationModalLabel">Add My Education</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form action="#" th:action="@{/candidate-portal/add-candidate-education}" method="post">
                        <div class="form-group">
                            <label for="institution">Institution</label>
                            <input type="text" class="form-control" id="educationInstitution" name="institution"
                                   th:value="${candidateEducationDTO != null ? candidateEducationDTO.institution : ''}">
                        </div>
                        <div class="form-group">
                            <label for="degree">Degree</label>
                            <input type="text" class="form-control" id="degree" name="degree"
                                   th:value="${candidateEducationDTO != null ? candidateEducationDTO.degree : ''}">
                        </div>
                        <div class="form-group">
                            <label for="fieldOfStudy">Field of Study</label>
                            <input type="text" class="form-control" id="fieldOfStudy" name="fieldOfStudy"
                                   th:value="${candidateEducationDTO != null ? candidateEducationDTO.fieldOfStudy : ''}">
                        </div>
                        <div class="form-group">
                            <label for="fromDateEducation">From</label>
                            <input type="date" class="form-control" id="fromDateEducation" name="fromDate"
                                   th:value="${candidateEducationDTO != null ? candidateEducationDTO.fromDate : ''}">
                        </div>
                        <div class="form-group">
                            <label for="toDateEducation">To</label>
                            <input type="date" class="form-control" id="toDateEducation" name="toDate"
                                   th:value="${candidateEducationDTO != null ? candidateEducationDTO.toDate : ''}">
                        </div>
                        <button type="submit" class="add-job-offer-button btn btn-primary">Save changes</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal edycji edukacji dla każdego obiektu -->
    <div th:each="education : ${candidateEducationStages}" class="modal fade"
         th:id="'editEducationModal-' + ${education.candidateEducationId}" tabindex="-1" role="dialog"
         aria-labelledby="editEducationModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Edit Education</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <!-- Formularz edycji -->
                    <form th:action="@{/candidate-portal/update-candidate-education}" method="post">
                        <input type="hidden" name="candidateEducationId" th:value="${education.candidateEducationId}"/>
                        <div class="form-group">
                            <label for="editInstitution">Institution</label>
                            <input type="text" class="form-control" id="editEducationInstitution" name="institution"
                                   th:value="${education.institution}">
                        </div>
                        <div class="form-group">
                            <label for="editDegree">Degree</label>
                            <input type="text" class="form-control" id="editDegree" name="degree"
                                   th:value="${education.degree}">
                        </div>
                        <div class="form-group">
                            <label for="editFieldOfStudy">Field of Study</label>
                            <input type="text" class="form-control" id="editFieldOfStudy" name="fieldOfStudy"
                                   th:value="${education.fieldOfStudy}">
                        </div>
                        <div class="form-group">
                            <label for="editFromDateEducation">From</label>
                            <input type="date" class="form-control" id="editFromDateEducation" name="fromDate"
                                   th:value="${education.fromDate}">
                        </div>
                        <div class="form-group">
                            <label for="editToDateEducation">To</label>
                            <input type="date" class="form-control" id="editToDateEducation" name="toDate"
                                   th:value="${education.toDate}">
                        </div>
                        <button type="submit" class="add-job-offer-button btn btn-primary mb-3">Save changes</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <!--COURSE----------------------------------------------------------------------------------------------------------------------------------------------------->
    <div class="candidate-card">
        <div class="card-body">
            <button type="button" class="add-job-offer-button btn btn-primary mb-3" data-toggle="modal"
                    data-target="#addCourseModal">
                <i class="fas fa-plus"></i> Add Course
            </button>
            <h4 class="mb-0">My Courses</h4>
            <p></p>
            <div class="experience-list">
                <div th:each="course : ${candidateCourses}" class="frame-card card mb-3">
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <div class="course-info">Institution: <span class="experience-info-value"
                                                                            th:text="${course.institution}"></span>
                                </div>
                                <div class="course-info">Course Title: <span class="experience-info-value"
                                                                             th:text="${course.courseTitle}"></span>
                                </div>
                                <div class="course-info">Technologies: <span class="experience-info-value"
                                                                             th:text="${course.technologies}"></span>
                                </div>
                            </div>
                            <div class="experience-dates text-right">
                                <p class="mb-1"><strong>From:</strong> <span th:text="${course.fromDate}"></span></p>
                                <p class="mb-1"><strong>To:</strong> <span th:text="${course.toDate}"></span></p>
                            </div>
                            <div class="experience-actions ml-3">
                                <!-- Edycja kursu -->
                                <button type="button" class="btn btn-primary change-photo-button"
                                        th:data-target="'#editCourseModal-' + ${course.candidateCourseId}"
                                        data-toggle="modal" title="Edit">
                                    <i class="fas fa-pencil-alt icon-size"></i>
                                </button>
                                <!-- Usuwanie kursu -->
                                <form th:action="@{/candidate-portal/delete-course}" method="post" class="d-inline">
                                    <input type="hidden" name="candidateCourseId"
                                           th:value="${course.candidateCourseId}"/>
                                    <button type="submit" class="btn btn-danger change-photo-button" title="Delete">
                                        <i class="fas fa-trash icon-size"></i>
                                    </button>
                                </form>
                            </div>
                        </div>
                        <div class="mt-3">
                            <div class="course-info">Description:</div> <!-- Etykieta Description -->
                            <div class="course-info-value description" th:text="${course.description}"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal ADD Course -->
    <div class="modal fade" id="addCourseModal" tabindex="-1" role="dialog" aria-labelledby="addCourseModalLabel"
         aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addCourseModalLabel">Add My Course</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form action="#" th:action="@{/candidate-portal/add-candidate-course}" method="post">
                        <div class="form-group">
                            <label for="institution">Institution</label>
                            <input type="text" class="form-control" id="institution" name="institution"
                                   th:value="${candidateCourseDTO != null ? candidateCourseDTO.institution : ''}">
                        </div>
                        <div class="form-group">
                            <label for="courseTitle">Course Title</label>
                            <input type="text" class="form-control" id="courseTitle" name="courseTitle"
                                   th:value="${candidateCourseDTO != null ? candidateCourseDTO.courseTitle : ''}">
                        </div>
                        <div class="form-group">
                            <label for="description">Description</label>
                            <textarea class="form-control" id="courseDescription" name="description"
                                      th:text="${candidateCourseDTO != null ? candidateCourseDTO.description : ''}"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="technologies">Technologies</label>
                            <input type="text" class="form-control" id="technologies" name="technologies"
                                   th:value="${candidateCourseDTO != null ? candidateCourseDTO.technologies : ''}">
                        </div>
                        <div class="form-group">
                            <label for="fromDateCourse">From</label>
                            <input type="date" class="form-control" id="fromDateCourse" name="fromDate"
                                   th:value="${candidateCourseDTO != null ? candidateCourseDTO.fromDate : ''}">
                        </div>
                        <div class="form-group">
                            <label for="toDateCourse">To</label>
                            <input type="date" class="form-control" id="toDateCourse" name="toDate"
                                   th:value="${candidateCourseDTO != null ? candidateCourseDTO.toDate : ''}">
                        </div>
                        <button type="submit" class="add-job-offer-button btn btn-primary">Save changes</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal edycji kursu dla każdego obiektu -->
    <div th:each="course : ${candidateCourses}" class="modal fade"
         th:id="'editCourseModal-' + ${course.candidateCourseId}" tabindex="-1" role="dialog"
         aria-labelledby="editCourseModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Edit Course</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <!-- Formularz edycji -->
                    <form th:action="@{/candidate-portal/update-candidate-course}" method="post">
                        <input type="hidden" name="candidateCourseId" th:value="${course.candidateCourseId}"/>
                        <div class="form-group">
                            <label for="editInstitution">Institution</label>
                            <input type="text" class="form-control" id="editInstitution" name="institution"
                                   th:value="${course.institution}">
                        </div>
                        <div class="form-group">
                            <label for="editCourseTitle">Course Title</label>
                            <input type="text" class="form-control" id="editCourseTitle" name="courseTitle"
                                   th:value="${course.courseTitle}">
                        </div>
                        <div class="form-group">
                            <label for="editDescription">Description</label>
                            <textarea class="form-control" id="editCourseDescription" name="description"
                                      th:text="${course.description}"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="editTechnologies">Technologies</label>
                            <input type="text" class="form-control" id="editTechnologies" name="technologies"
                                   th:value="${course.technologies}">
                        </div>
                        <div class="form-group">
                            <label for="editFromDateCourse">From</label>
                            <input type="date" class="form-control" id="editFromDateCourse" name="fromDate"
                                   th:value="${course.fromDate}">
                        </div>
                        <div class="form-group">
                            <label for="editToDateCourse">To</label>
                            <input type="date" class="form-control" id="editToDateCourse" name="toDate"
                                   th:value="${course.toDate}">
                        </div>
                        <button type="submit" class="add-job-offer-button btn btn-primary mb-3">Save changes</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <!------HOBBY--------------------------------------------------------------------------------------------------------------------------------------------------------->
    <div class="candidate-card">
        <div class="card-body">
            <!-- Przycisk do edycji profilu -->
            <button type="button" class="add-job-offer-button btn btn-primary mb-3" data-toggle="modal"
                    data-target="#editHobby">
                <i class="fas fa-pencil-alt"></i> Edit Hobby
            </button>
            <h4 class="mb-0">My hobby</h4>
            <p class="card-text text-justify frame-card" th:text="${candidate.hobby}">No information available</p>
        </div>
    </div>
    <!-- Nowe Okno Modal do edycji profilu -->
    <div class="modal fade" id="editHobby" tabindex="-1" role="dialog"
         aria-labelledby="editHobbyLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content ">
                <div class="modal-header">
                    <h5 class="modal-title" id="editHobbyLabel">Edit Hobby</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form th:action="@{/candidate-portal/update-candidate-hobby}" method="post">
                        <div class="form-group ">
                            <label for="aboutMe">My hobby:</label>
                            <textarea class="form-control " id="hobby" name="hobby" rows="4"
                                      th:text="${candidate.hobby}"></textarea>
                        </div>
                        <button type="submit" class="add-job-offer-button btn btn-primary mb-3">Save changes
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>
