document.addEventListener('DOMContentLoaded', function() {
    const addExperienceBtn = document.getElementById('addExperienceBtn');
    const experienceSection = document.getElementById('experienceSection');

    // Funkcja do tworzenia formularza doświadczenia
    function createExperienceForm(experienceCount) {
        const newExperienceDiv = document.createElement('div');
        newExperienceDiv.classList.add('entry');

        newExperienceDiv.innerHTML = `
            <div class="form-group">
                <label for="companyName">Company name</label>
                <input type="text" class="form-control" name="candidateExperiences[${experienceCount}].companyName" required>
            </div>
            <div class="form-group">
                <label for="candidatePosition">Position</label>
                <input type="text" class="form-control" name="candidateExperiences[${experienceCount}].candidatePosition" required>
            </div>
            <div class="form-group">
                <label for="description">Description</label>
                <textarea class="form-control" name="candidateExperiences[${experienceCount}].description"></textarea>
            </div>
            <div class="form-group">
                <label for="fromDate">From</label>
                <input type="date" class="form-control" name="candidateExperiences[${experienceCount}].fromDate">
            </div>
            <div class="form-group">
                <label for="toDate">To</label>
                <input type="date" class="form-control" name="candidateExperiences[${experienceCount}].toDate">
            </div>
            <hr>
        `;

        return newExperienceDiv;
    }

    // Dodaj pierwszy formularz od razu
    experienceSection.appendChild(createExperienceForm(0));

    // Funkcja do dodawania kolejnych formularzy
    addExperienceBtn.addEventListener('click', function() {
        const experienceCount = document.querySelectorAll('.entry').length; // Liczba sekcji doświadczenia

        // Sprawdzamy, czy już nie ma 5 formularzy
        if (experienceCount >= 5) {
            alert("You cannot add more than 5 experiences.");
            return;  // Zatrzymuje dalsze dodawanie formularzy
        }

        experienceSection.appendChild(createExperienceForm(experienceCount));
    });
});

document.addEventListener('DOMContentLoaded', function() {
    const addProjectBtn = document.getElementById('addProjectBtn');
    const projectSection = document.getElementById('projectSection');

    // Function to create a project form
    function createProjectForm(projectCount) {
        const newProjectDiv = document.createElement('div');
        newProjectDiv.classList.add('entry');

        newProjectDiv.innerHTML = `
            <div class="form-group">
                <label for="projectTitle">Project Title</label>
                <input type="text" class="form-control" name="candidateProjects[${projectCount}].projectTitle" required>
            </div>
            <div class="form-group">
                <label for="description">Description</label>
                <textarea class="form-control" name="candidateProjects[${projectCount}].description"></textarea>
            </div>
            <div class="form-group">
                <label for="technologies">Technologies</label>
                <input type="text" class="form-control" name="candidateProjects[${projectCount}].technologies" placeholder="e.g., Java, Spring, React">
            </div>
            <div class="form-group">
                <label for="fromDate">From</label>
                <input type="date" class="form-control" name="candidateProjects[${projectCount}].fromDate">
            </div>
            <div class="form-group">
                <label for="toDate">To</label>
                <input type="date" class="form-control" name="candidateProjects[${projectCount}].toDate">
            </div>
            <div class="form-group">
                <label for="projectLink">Project Link</label>
                <input type="url" class="form-control" name="candidateProjects[${projectCount}].projectLink" placeholder="https://example.com">
            </div>
            <hr>
        `;

        return newProjectDiv;
    }

    // Add first project form right away
    projectSection.appendChild(createProjectForm(0));

    // Function to add more project forms
    addProjectBtn.addEventListener('click', function() {
        const projectCount = document.querySelectorAll('.entry').length; // Count of project sections

        // Check if more than 5 project forms are being added
        if (projectCount >= 5) {
            alert("You cannot add more than 5 projects.");
            return;  // Stop further form additions
        }

        projectSection.appendChild(createProjectForm(projectCount));
    });
});
