document.addEventListener('DOMContentLoaded', function() {
    // Experience Section
    const addExperienceBtn = document.getElementById('addExperienceBtn');
    const experienceSection = document.getElementById('experienceSection');

    function createExperienceForm(experienceCount) {
        const newExperienceDiv = document.createElement('div');
        newExperienceDiv.classList.add('entry');

        newExperienceDiv.innerHTML = `
            <div class="form-group">
                <label for="companyName">Company name</label>
                <input type="text" class="form-control" name="candidateExperiences[${experienceCount}].companyName" required>
            </div>
            <div class="form-group">
                <label for="candidatePosition">Position</label>
                <input type="text" class="form-control" name="candidateExperiences[${experienceCount}].candidatePosition" required>
            </div>
            <div class="form-group">
                <label for="description">Description</label>
                <textarea class="form-control" name="candidateExperiences[${experienceCount}].description"></textarea>
            </div>
            <div class="form-group">
                <label for="fromDate">From</label>
                <input type="date" class="form-control" name="candidateExperiences[${experienceCount}].fromDate">
            </div>
            <div class="form-group">
                <label for="toDate">To</label>
                <input type="date" class="form-control" name="candidateExperiences[${experienceCount}].toDate">
            </div>
            <hr>
        `;

        return newExperienceDiv;
    }

    experienceSection.appendChild(createExperienceForm(0));

    addExperienceBtn.addEventListener('click', function() {
        const experienceCount = experienceSection.querySelectorAll('.entry').length;

        if (experienceCount >= 5) {
            alert("You cannot add more than 5 experiences.");
            return;
        }

        experienceSection.appendChild(createExperienceForm(experienceCount));
    });

    // Project Section
    const addProjectBtn = document.getElementById('addProjectBtn');
    const projectSection = document.getElementById('projectSection');

    function createProjectForm(projectCount) {
        const newProjectDiv = document.createElement('div');
        newProjectDiv.classList.add('entry');

        newProjectDiv.innerHTML = `
            <div class="form-group">
                <label for="projectTitle">Project Title</label>
                <input type="text" class="form-control" name="candidateProjects[${projectCount}].projectTitle" required>
            </div>
            <div class="form-group">
                <label for="description">Description</label>
                <textarea class="form-control" name="candidateProjects[${projectCount}].description"></textarea>
            </div>
            <div class="form-group">
                <label for="technologies">Technologies</label>
                <input type="text" class="form-control" name="candidateProjects[${projectCount}].technologies" placeholder="e.g., Java, Spring, React">
            </div>
            <div class="form-group">
                <label for="fromDate">From</label>
                <input type="date" class="form-control" name="candidateProjects[${projectCount}].fromDate">
            </div>
            <div class="form-group">
                <label for="toDate">To</label>
                <input type="date" class="form-control" name="candidateProjects[${projectCount}].toDate">
            </div>
            <div class="form-group">
                <label for="projectLink">Project Link</label>
                <input type="url" class="form-control" name="candidateProjects[${projectCount}].projectLink" placeholder="https://example.com">
            </div>
            <hr>
        `;

        return newProjectDiv;
    }

    projectSection.appendChild(createProjectForm(0));

    addProjectBtn.addEventListener('click', function() {
        const projectCount = projectSection.querySelectorAll('.entry').length;

        if (projectCount >= 5) {
            alert("You cannot add more than 5 projects.");
            return;
        }

        projectSection.appendChild(createProjectForm(projectCount));
    });

    // Education Section
    const addEducationBtn = document.getElementById('addEducationBtn');
    const educationSection = document.getElementById('educationSection');

    function createEducationForm(educationCount) {
        const newEducationDiv = document.createElement('div');
        newEducationDiv.classList.add('entry');

        newEducationDiv.innerHTML = `
            <div class="form-group">
                <label for="institution">Institution</label>
                <input type="text" class="form-control" name="candidateEducation[${educationCount}].institution" required>
            </div>
            <div class="form-group">
                <label for="degree">Degree</label>
                <input type="text" class="form-control" name="candidateEducation[${educationCount}].degree" required>
            </div>
            <div class="form-group">
                <label for="fieldOfStudy">Field of Study</label>
                <input type="text" class="form-control" name="candidateEducation[${educationCount}].fieldOfStudy">
            </div>
            <div class="form-group">
                <label for="fromDate">From</label>
                <input type="date" class="form-control" name="candidateEducation[${educationCount}].fromDate">
            </div>
            <div class="form-group">
                <label for="toDate">To</label>
                <input type="date" class="form-control" name="candidateEducation[${educationCount}].toDate">
            </div>
            <hr>
        `;

        return newEducationDiv;
    }

    educationSection.appendChild(createEducationForm(0));

    addEducationBtn.addEventListener('click', function() {
        const educationCount = educationSection.querySelectorAll('.entry').length;

        if (educationCount >= 5) {
            alert("You cannot add more than 5 education entries.");
            return;
        }

        educationSection.appendChild(createEducationForm(educationCount));
    });

    // Course Section
    const addCourseBtn = document.getElementById('addCourseBtn');
    const courseSection = document.getElementById('courseSection');

    function createCourseForm(courseCount) {
        const newCourseDiv = document.createElement('div');
        newCourseDiv.classList.add('entry');

        newCourseDiv.innerHTML = `
            <div class="form-group">
                <label for="institution">Institution</label>
                <input type="text" class="form-control" name="candidateCourses[${courseCount}].institution" required>
            </div>
            <div class="form-group">
                <label for="courseTitle">Course Title</label>
                <input type="text" class="form-control" name="candidateCourses[${courseCount}].courseTitle" required>
            </div>
            <div class="form-group">
                <label for="description">Description</label>
                <textarea class="form-control" name="candidateCourses[${courseCount}].description"></textarea>
            </div>
            <div class="form-group">
                <label for="technologies">Technologies</label>
                <input type="text" class="form-control" name="candidateCourses[${courseCount}].technologies">
            </div>
            <div class="form-group">
                <label for="fromDate">From</label>
                <input type="date" class="form-control" name="candidateCourses[${courseCount}].fromDate">
            </div>
            <div class="form-group">
                <label for="toDate">To</label>
                <input type="date" class="form-control" name="candidateCourses[${courseCount}].toDate">
            </div>
            <hr>
        `;

        return newCourseDiv;
    }

    courseSection.appendChild(createCourseForm(0));

    addCourseBtn.addEventListener('click', function() {
        const courseCount = courseSection.querySelectorAll('.entry').length;

        if (courseCount >= 5) {
            alert("You cannot add more than 5 course entries.");
            return;
        }

        courseSection.appendChild(createCourseForm(courseCount));
    });
});
