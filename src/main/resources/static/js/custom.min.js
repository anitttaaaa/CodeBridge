document.addEventListener('DOMContentLoaded', function() {
    const addExperienceBtn = document.getElementById('addExperienceBtn');
    const experienceSection = document.getElementById('experienceSection');

    // Funkcja do tworzenia formularza doświadczenia
    function createExperienceForm(experienceCount) {
        const newExperienceDiv = document.createElement('div');
        newExperienceDiv.classList.add('experience-entry');

        newExperienceDiv.innerHTML = `
            <div class="form-group">
                <label for="companyName">Company name</label>
                <input type="text" class="form-control" name="candidateExperiences[${experienceCount}].companyName" required>
            </div>
            <div class="form-group">
                <label for="candidatePosition">Position</label>
                <input type="text" class="form-control" name="candidateExperiences[${experienceCount}].candidatePosition" required>
            </div>
            <div class="form-group">
                <label for="description">Description</label>
                <textarea class="form-control" name="candidateExperiences[${experienceCount}].description"></textarea>
            </div>
            <div class="form-group">
                <label for="fromDate">From</label>
                <input type="date" class="form-control" name="candidateExperiences[${experienceCount}].fromDate">
            </div>
            <div class="form-group">
                <label for="toDate">To</label>
                <input type="date" class="form-control" name="candidateExperiences[${experienceCount}].toDate">
            </div>
            <hr>
        `;

        return newExperienceDiv;
    }

    // Dodaj pierwszy formularz od razu
    experienceSection.appendChild(createExperienceForm(0));

    // Funkcja do dodawania kolejnych formularzy
    addExperienceBtn.addEventListener('click', function() {
        const experienceCount = document.querySelectorAll('.experience-entry').length; // Liczba sekcji doświadczenia

        // Sprawdzamy, czy już nie ma 5 formularzy
        if (experienceCount >= 5) {
            alert("You cannot add more than 5 experiences.");
            return;  // Zatrzymuje dalsze dodawanie formularzy
        }

        experienceSection.appendChild(createExperienceForm(experienceCount));
    });
});
